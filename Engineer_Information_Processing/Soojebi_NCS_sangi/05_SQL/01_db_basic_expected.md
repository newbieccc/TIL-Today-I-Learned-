# SQL 응용

## # 데이터베이스 기본 - 예상문제

### 01. 서술

- 트랜잭션에 대해 서술하시오
  - `데이터베이스 시스템에서 하나의 논리적 기능을 정상적으로 수행하기 위한 작업의 기본 단위이다`

---

### 02. 스키마 용어

|||
|:--:|--|
|`외부 스키마`</br>(External Schema)|- 사용자나  개발자의 관점에서 필요로 하는 데이터베이스의 논리적 구조</br>- 사용자 뷰를 나타냄</br>- 서브 스키마로 불림|
|`개념 스키마`</br>(Conceptual Schema)|- 데이터베이스의 전체적인 논리적 구조</br>- 전체적인 뷰를 나타냄</br>- 개체 간의 관계, 제약 조건, 접근 권한, 무결성, 보안에 대해 정의|
|`내부 스키마`</br>(Internal Schema)|- 물리적 저장장치의 관점에서 보는 데이터베이스 구조</br>- 실제로 데이터베이스에 저장될 레코드의 형식을 정의하고 저장 데이터 항목의 표현 방법, 내부 레코드의 물리적 순서 등을 표현|
|||

---

### 03. 서술

- 인덱스(Index)에 대해 서술하시오
  - `데이터를 빠르게 찾을 수 있는 수단으로서 테이블에 대한 조회 속도를 높여 주는 자료구조이다`

---

### 04. 쿼리 작성

- 사원 테이블의 '사번'컬럼에 대해
- '사번인덱스'라는 인덱스 명으로 인덱스를 생성하고자 한다
  - `CREATE INDEX 사번인덱스 ON 사원(사번);`

---

### 05. 쿼리 작성

- 사람이라는 테이블을 만드려고 한다
- 이름(VARCHAR(10)), 성별(CHAR(1))이라는 컬럼
- 성별은 추가로 'M'과 'F' 값만 가질 수 있도록 제약 조건을 걸고자 한다

```sql
CREATE TABLE 사람(
  이름 VARCHAR(10),
  성별 CHAR(1) CHECK (성별 = 'M' OR 성별 = 'F')
)
```

---

### 06. 쿼리 작성

- 사원 테이블에 VARCHAR(11) 타입으로 전화번호라는 컬럼을 추가하려고 한다

```SQL
ALTER TABLE 사원 ADD 전화번호 VARCHAR(11);
```

---

### 07. 뷰 생성하는 쿼리 작성

- 사원 테이블에
- 사번, 업무, 이름, 생년월일, 성별, 입사일이라는 컬럼이 있을 때
- 사원 테이블에서 성별 값이 'M'을 가진 사번,
- 이름으로 생성된 '사원뷰'라는 이름의 뷰 생성하는 쿼리를 작성하시오

```SQL
CREATE VIEW 사원뷰 AS 사원 SELECT 사번, 이름 FROM 사원 WHERE 성별 = 'M';
```

---

### 08. 출력 쿼리 작성

- 학생 테이블에서
- 전공만 출력하는 쿼리 작성 (중복될 경우 한 개만 검색!)

```SQL
SELECT DISTINCT 전공 FROM 학생;
```

---

### 09. 쿼리 작성

- 학생 테이블에서
- '이'씨 성을 가진 사람의 학번을 출력하는 쿼리를 작성하시오

```SQL
SELECT 학번 FROM 학생 WHERE 이름 LIKE '이%';
```

---

### 10. 쿼리 작성

- 학생 테이블에서 주소 컬럼이 있다
- 주소 컬럼이 NULL이 아닌 주소값을 출력하는 쿼리를 작성하시오

```SQL
SELECT 주소 FROM 학생 WHERE 주소 IS NOT NULL;
```

---

### 11. 쿼리 작성

- 다음의 쿼리와 동일한 쿼리를 IN 키워드를 써서 작성하시오
- SELECT * FROM 교수 WHERE 전공 = '컴퓨터공학' OR 전공 = '전자공학';

```SQL
SELECT * FROM 교수 WHERE 전공 IN ('컴퓨터공학', '전자공학');
```

---

### 12. 쿼리 작성

- 고객 테이블에서
- 나이가 50살 이상이면서 59살 이하이고, 성별이 남자인 사람의 이름을 출력하는 쿼리를 작성하시오
- (BETWEEN 구문을 사용하기)

```SQL
SELECT 이름 FROM 고객 WHERE 나이 BETWEEN 50 AND 59 AND 성별 = '남';
```

---

### 13. 쿼리 작성

- 성적 테이블에서
- 이름, 과목, 성적을 성적순(내림차순)으로 출력하는 쿼리를 작성하시오

```SQL
SELECT * FROM 성적 ORDER BY 성적 DESC;
```

---

### 14. 쿼리 작성

- 도서와 도서 가격이라는 테이블이 있다
- 책번호 컬럼을 기준으로 LEFT OUTER JOIN을 하여 결과 테이블과 같이 나오도록 쿼리를 작성하시오

- 도서 테이블

|책번호|책명|
|:--:|:--:|
|111|운영체제|
|222|자료구조|
|555|컴퓨터구조|
|||

- 도서가격 테이블

|책번호|가격|
|:--:|:--:|
|111|20,000|
|222|25,000|
|333|10,000|
|444|15,000|
|||

- 결과 테이블

|책번호|책명|ㅣ|책번호|가격|
|:--:|:--:|--|:--:|:--:|
|111|운영체제|ㅣ|111|20,000|
|222|자료구조|ㅣ|222|25,000|
|555|컴퓨터구조|ㅣ|NULL|NULL|

```SQL
SELECT A.책번호, A.책명, B.책번호, B.가격 FROM 도서 A LEFT JOIN 도서가격 B ON A.책번호 = B.책번호;
```

---

### 15. 튜플 수

- 직원 테이블

|사번|이름|연봉|
|:--:|:--:|:--:|
|1|홍길동|1,000|
|2|임꺽정|1,500|
|3|장길산|2,000|
||||

- 쿼리

```SQL
SELECT * FROM 직원 WHERE SAL >= 1500
UNION ALL
SELECT * FROM 직원 WHERE SAL >= 2000;
```

>- UNION ALL : 중복 행이 제거되지 않은 쿼리 결과를 반환하는 집합 연산자

- 튜플 수 : `3`

---

### 16. 테이블에 삽입하는 쿼리

- 테이블명 : EMPLOYEE(직원 테이블)
- 컬럼명 : NAME(사원명), AGE(나이), SALARY(급여)

>- 사원명 : 홍길동
>- 나이 : 24
>- 급여 : 300
>- 위의 명세를 테이블에 삽입하시오

- `INSERT INTO EMPLOYEE(NAME, AGE, SALARY) VALUES('홍길동', 24, 300);`

---

### 17. 테이블에 삭제하는 쿼리

- 테이블명 : EMPLOYEE(직원 테이블)
- 컬럼명 : NAME(사원명), AGE(나이), SALARY(급여)

>- 급여가 300 이하인 직원들을 직원 테이블에서 삭제하기

- `DELETE FROME EMPLOYEE WHERE SALARY <= 300;`

---

### 18. 권한 부여

- 관리자가 사용자 장길산에게 '학생' 테이블에 대해 UPDATE할 수 있는 권한을 부여하는 쿼리를 작성하시오
  - `GRANT UPDATE ON 학생 TO 장길산;`
