# # 컴퓨터 구조

## 07. 제어장치 (2)

- 컴퓨터과학과 강지훈 교수님

### (1) 마이크로명령어 형식

- 마이크로명령어
    - 마이크로프로그램에 의한 제어방식에서 제어기억장치에 있는 제어단어
    - CPU의 각 구성 요소에 어떤 동작을 시킬지 지정하는 제어신호의 집합
        - ALU, 레지스터 등등
    - 하나의 마이크로명령어는 하나 이상의 마이크로연산을 지정할 수 있음
    - 마이크로명령어들이 순차적으로 실행되면서 마이크로프로그램을 이룸
        - 명령어 한 개를 실행하기 위해 여러 개의 마이크로명령어가 순차 실행됨
- 마이크로명령어 형식
    - 마이크로명령어의 구성내역(26비트 예시)
        - 8개 필드로 구성
          ![img.png](image/07-01.png)
            - A, B, D 필드: 출발 및 도착 레지스터 선택
            - F 필드: ALU 연산 선택
            - H 필드: 시프트 연산 선택
            - MUX 1 필드: 0과 1로서 내부와 외부 주소를 선택
            - MUX 2 필드: 상태비트의 값에 따라 CAR을 구동
            - ADRS 필드: ROM의 2진 번지에 해당하는 10진 주소

- 마이크로명령어 형식의 예시

| 비트    | 필드     | 기호              | 기능                         |
  |-------|--------|-----------------|----------------------------|
| 1~3   | `A`    | `INP`, `R1~R7`  | 출발 레지스터 선택                 |
| 4~6   | `B`    | `INP`, `R1~R7`  | 출발 레지스터 선택                 |
| 7~9   | `D`    | `NONE`, `R1~R7` | 도착 레지스터 선택                 |
| 10~13 | `F`    | ALU의 연산 참조      | ALU 연산 선택                  |
| 14~16 | `H`    | 시프터의 연산 참조      | 시프터 연산 선택                  |
| 17    | `MUX1` | `INT`, `EXT`    | MUX1 선택 (`INT=0`, `EXT=1`) |
| 18~20 | `MUX2` | 상태비트 참조         | MUX2 선택                    |
| 21~26 | `ADRS` | 주소              | ROM의 단어 선택                 |

- MUX2의 기능 선택

| 2진코드 |  기호  | 기능                        |
|:----:|:----:|---------------------------|
| 000  | NEXT | CAR을 증가(다음 주소로 간다)        |
| 001  | LAD  | CAR에 주소를 적재(무조건 분기)       |
| 010  |  LC  | 캐리가 있으면 적재(C=1이면 분기)      |
| 011  | LNC  | 캐리가 없으면 적재(C=0이면 분기)      |
| 100  |  LZ  | 제로면 적재(Z=1이면 분기)          |
| 101  | LNZ  | 제로가 아니면 적재(Z=0이면 분기)      |
| 110  |  LS  | 부호가 바뀌었으면 적재(S=1이면 분기)    |
| 111  |  LV  | 오버플로우가 발생했으면 적재(V=1이면 분기) |

### (2) 마이크로프로그램의 작성

### (3) 하드웨어에 의한 제어

