# # 컴퓨터 구조

## 05. 처리장치 (2)

- 컴퓨터과학과 강지훈 교수님

### (1) 산술논리 연산장치

- 산술연산과 논리연산을 실행하는 장치
- 산술 연산 회로
    - 여러 개의 전가산기를 연속적으로 연결한 병렬가산기로 구성
    - 병렬가산기로 들어가는 제어입력 값을 선택하여 여러 가지 형태의 산술연산을 실행

| 선택신호 | 선택신호 | 입력값  | F = X + Y + C_in | F = X + Y + C<sub>in</sub> |
|:----:|:----:|:----:|:----------------:|:--------------------------:|
| `S1` | `S0` | `Y`  |    `C_in = 0`    |         `C_in = 1`         |
|  0   |  0   | 모두 0 |    F = A (전송)    |       F = A + 1 (증가)       |
|  0   |  1   |  B   |  F = A + B (가산)  |       F = A + B + 1        |
|  1   |  0   |  B̅  |    F = A + B̅    |    F = A + B̅ + 1 (감산)     |
|  1   |  1   | 모두 1 |  F = A − 1 (감소)  |         F = A (전송)         |

- 논리 연산 회로
    - 레지스터에 있는 각 비트를 독립된 2진 변수로 간주하여 연산 실행
    - AND, OR, XOR, NOT 연산 등이 있으며, 이를 이용해 복잡한 연산에 활용

- 산술논리 연산회로
    - 산술연산장치와 논리연산장치를 결합

- ALU에 대한 연산표

| 8비트 데이터의 경우 |        |        |        | 연산             | 기능              |
|:-----------:|:------:|:------:|:------:|----------------|-----------------|
|    `S2`     |  `S1`  |  `S0`  | `C_in` | 연산             | 기능              |
| ----------- | ------ | ------ | ------ | ------         | ------          |
|      0      |   0    |   0    |   0    | F = A          | A의 전송           |
|      0      |   0    |   0    |   1    | F = A + 1      | A에 1 더하기        |
|      0      |   0    |   1    |   0    | F = A + B      | 덧셈              |
|      0      |   0    |   1    |   1    | F = A + B + 1  | 캐리 값 1과 더하기     |
|      0      |   1    |   0    |   0    | F = A + B̅     | A에 B의 1의 보수 더하기 |
|      0      |   1    |   0    |   1    | F = A + B̅ + 1 | 뺄셈              |
|      0      |   1    |   1    |   0    | F = A − 1      | A에서 1 빼기        |
|      0      |   1    |   1    |   1    | F = A          | A의 전송           |
|      1      |   0    |   0    |   x    | F = A ∧ B      | AND             |
|      1      |   0    |   1    |   x    | F = A ∨ B      | OR              |
|      1      |   1    |   0    |   x    | F = A ⊕ B      | XOR             |
|      1      |   1    |   1    |   x    | F = A̅         | A의 보수           |

### (2) 상태 레지스터

- 상태 레지스터(flag register)
    - ALU에서 산술 연산이 수행된 후 연산 결과에 의해 나타나는 상태 값을 저장
        - C(carry bit)
        - S(Sign bit)
        - Z(Zero bit)
        - V(Overflow bit)

### (3) 시프터

- 시프터(shifter)
    - 입력 데이터의 모든 비트들을 각각 서로 이웃한 비트로 자리를 옮기는 시프트 연산을 수행

| H1 | H0 | 연산        | 기능             |
|:--:|:--:|-----------|----------------|
| 0  | 0  | S ← F     | 시프트 없이 전송      |
| 0  | 1  | S ← shr F | 우측 시프트하여 전송    |
| 1  | 0  | S ← shl F | 좌측 시프트하여 전송    |
| 1  | 1  | S ← 0     | 모든 출력비트에 0을 전송 |

### (4) 제어단어

- 제어단어(control word)
    - 제어변수(선택신호)의 묶음, 제어 변수를 집합적으로 표현한 것
- 제어변수(선택신호)
    - 처리장치내에서 수행되는 마이크로 연산을 선택하는 변수
        - 선택신호 즉, 제어변수가 특정한 마이크로 연산을 선택
    - 처리장치의 버스, ALU, 쉬프터 도착 레지스터 등을 제어
    - 이러한 제어변수드르이 묶음을 제어단어(control word)라 함
- 제어단어의 내역

| 2진 코드 | A    | B    | D  | F (C_in = 0) | F (C_in = 1)  | H       |
|:-----:|:-----|:-----|:---|:-------------|:--------------|:--------|
|  000  | 외부입력 | 외부입력 | 없음 | F = A        | F = A + 1     | 시프트 없음  |
|  001  | R1   | R1   | R1 | F = A + B    | F = A + B + 1 | SHR     |
|  010  | R2   | R2   | R2 | F = A + B̅   | F = A − B     | SHL     |
|  011  | R3   | R3   | R3 | F = A − 1    | F = A         | bus = 0 |
|  100  | R4   | R4   | R4 | F = A ∧ B    | -             | -       |
|  101  | R5   | R5   | R5 | F = A ∨ B    | -             | ROR     |
|  110  | R6   | R6   | R6 | F = A ⊕ B    | -             | ROL     |
|  111  | R7   | R7   | R7 | F = A̅       | -             | -       |

- 여러가지 마이크로 연산에 대한 제어단어 예시

| 마이크로 연산           | A  | B  |  D   | F         |    H    | A(2진) | B(2진) | D(2진) | F(2진) | H(2진) |
|:------------------|:--:|:--:|:----:|:----------|:-------:|:-----:|:-----:|:-----:|:-----:|:-----:|
| R1 ← R2 − R3      | R2 | R3 |  R1  | F = A − B | 시프트 없음  |  010  |  011  |  001  | 0101  |  000  |
| R4 ← shr(R5 + R6) | R5 | R6 |  R4  | F = A + B |   SHR   |  101  |  110  |  100  | 0010  |  001  |
| R7 ← R7 + 1       | R7 | -  |  R7  | F = A + 1 | 시프트 없음  |  111  |  000  |  111  | 0001  |  000  |
| R1 ← R2           | R2 | -  |  R1  | F = A     | 시프트 없음  |  010  |  000  |  001  | 0000  |  000  |
| Output ← R3       | R3 | -  | NONE | F = A     | 시프트 없음  |  011  |  000  |  000  | 0000  |  000  |
| R4 ← rol R4       | R4 | -  |  R4  | F = A     |   ROL   |  100  |  000  |  100  | 0000  |  110  |
| R5 ← 0            | -  | -  |  R5  | -         | bus = 0 |  000  |  000  |  101  | 0000  |  011  |

- 제어단어 생성을 위한 효과적인 방법
    - 처리장치의 구성요소를 실행하기 위한 제어단어에 대한 정보를 처리장치의 실행 흐름을 제어하는 제어장치가 관리
    - 이른 위해서는 제어장치내에서 제어단어 를 저장하기 위한 저장소. 제어기억장치가 필요함
    - 제어기억장치의 출력을 처리장치 각 구성요소의 선택 신호로 연결하면,
        - 기억장치에서 연속적인 제어단어를 읽고 처리장치에서는 마이크로 연산이 순서대로 연속적으로 수행됨
