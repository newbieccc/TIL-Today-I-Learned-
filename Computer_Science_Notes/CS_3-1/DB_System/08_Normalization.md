# 데이터베이스 시스템

## 08. 정규화

- 컴퓨터과학과 정재화 교수님

### (1) 좋은 릴레이션과 나쁜 릴레이션

- 잘못된 데이터베이스 모델링
    - 데이터의 중복
        - 일관성 유지의 어려움
        - 저장 공간 낭비
    - 갱신 이상
        - 삽입 이상
            - 레코드 추가 시 불필요한 컬럼값 없이는 추가하지 못하는 경우
        - 삭제 이상
            - 삭제 시 의도하지 않았던 다른 데이터가 삭제되는 경우
        - 수정 이상
            - 일부 레코드 수정 시 데이터의 일관성이 훼손되는 경우
- 좋은 릴레이션의 개념
    - 컴퓨터 프로그래머적 관점에서의 모델
        - 어떻게 데이터를 저장해야 하는가?
    - 릴레이션의 스키마가 얼마나 효율적으로 실세계를 반영하고 있는지 평가
    - 고려사항
        - 릴레이션 내의 컬럼간의 관계 분석
        - 불필요한 데이터의 종속과 중복제거
        - 새로운 컬럼들이 데이터베이스에 추가될 때, 기존 컬럼과의 관계 수정을 최소화

### (2) 함수적 종속성의 이해

- 함수적 종속성의 개념
    - FD(Functional Dependency)
    - 릴레이션 인스턴스를 분석하여 속성들 간의 연관관계를 표현한 것
    - 릴레이션의 효율성을 향상시켜 좋은 릴레이션으로 변환하는데 이용되는 중요한 개념
- 함수적 종속성의 확장
    - 함수적 종속성은 릴레이션의 효율성 여부에 중요한 판단기준
        - 그러나 릴레이션의 인스턴스만으로 내재된 모든 함수적 종속성을 찾아내기 어려움
    - 판별되지 않은 모든 함수적 종속성을 도출하기 위해 추론 규칙 등을 사용하여 함수적 종속성을 확장
    - 클로저(closure)
        - 판별된 함수적 종속성 집합으로부터 유추할 수 있는 모든 함수적 종속성 집합
        - F<sup>+</sup>
- 카노니컬 커버
    - 함수적 종속성 추론 규칙으로 확장된 클로저에는 자명한 종속성과 중복된 종속성을 포함
    - 불필요한 함수적 종속성을 제거한 표준형으로 변환 후 정규화를 수행
    - 표준형 조건
        - F의 모든 함수적 종속성의 종속자의 속성은 반드시 1개
        - F에서 X->A를 X의 진부분집합 Y에 대하여 Y->A로 교체했을 때, 그 집합이 F와 동등한 집합이 불가능
            - 가장 최소화 되어있는지를 확인하는 조건
        - F에서 어떤 함수적 종속성을 제거했을 때, 그 집합이 F와 동등한 집합이 불가능

### (3) 정규화

- 정규형
    - 이상 현상을 최소화하도록 특정 조건을 갖춘 릴레이션의 형식
- 정규형의 분류
    - 제1정규형
        - 가장 조건이 단순한 정규형
        - 릴레이션 스키마에서 정의된 모든 속성의 도메인이 원자값을 갖는 상태
        - 관계형 모델의 특성을 만족하는 경우, 자동 적용되는 정규형
    - 제2정규형
        - 릴레이션이 제1정규형을 만족하고 기본키의 부분집합이 특정 속성을 종속하고 있지 않은 상태
        - 주어진 릴레이션의 인스턴스가 기본키가 아닌 속성(비주속성)이 기본키(주속성)에 완전히 종속되어 있는 상태
        - X -> Y에 대한 함수 종속 관계
            - 부분 함수 종속 : Y가 X의 전체가 아닌 일부분에 종속
            - 완전 함수 종속 : Y가 X의 전체에 종속
        - 릴레이션의 무손실 분해
            - 무손실 분해 (lossless decomposition)
            - 스키마 R에 함수적 종속성 X->Y가 존재하고 X∩Y=∅이면, R을 R-Y와 XY로 분해
    - 제3정규형
        - 릴레이션이 제2정규형을 만족하고, 기본키가 아닌 속성들이 어떤 키에도 이행적으로 종속되지 않은 상태
    - BC정규형
        - 릴레이션이 제3정규형을 만족하고 릴레이션에 성립하는 X->Y 형태의 모든 함수적 종속성에 대하여 X가 수퍼키인 상태
    - 제4정규형
    - 제5정규형

- 정규화의 정의
    - 특정 정규형의 조건을 만족하도록 릴레이션과 속성을 재구성하는 과정
- 정규화의 기능
    - 데이터베이스 내에 모든 릴레이션을 효율적으로 표현
    - 바람직하지 않은 삽입, 수정, 삭제 등의 이상 발생 방지
    - 보다 간단한 관계 연산에 기초하여 검색 알고리즘을 효과적으로 작성할 수 있도록 지원
    - 새로운 형태의 데이터가 삽입될 때, 릴레이션 재구성의 필요성을 축소

- 함수적 종속성 다이어그램
    - FDD(Functional Dependency Diagram)
    - 릴레이션 내의 속성간의 종속 관계를 직관적이고 이해하기 쉽게 도식화한 표현방식
        - 직사각형 : 속성 또는 속성 집합
        - 화살표 : 함수적 종속성

- 역정규화의 개념
    - 정규화
        - 릴레이션 분할을 통해 데이터의 중복성을 최소화하는 과정
        - 사용 과저에서 많은 조인 연산을 유발
    - 역정규화
        - 정규화의 반대 과정
        - 정규화를 통해 분리되었던 릴레이션을 통합하는 재조정을 수행하고 정보의 부분적 중복을 허용하는 기법
        - 데이터 접근 성능 개선 목적
