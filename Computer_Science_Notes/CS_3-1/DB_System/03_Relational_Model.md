# 데이터베이스 시스템

## 03. 관계형 모델

- 컴퓨터과학과 정재화 교수님

### (1) 관계형 모델의 개념

- 논리적 데이터 모델링 단계
    - DBMS의 구현 모델에 맞춰 데이터의 구조를 표현하는 과정
    - 데이터 정의 언어로 기술된 개념 스키마 생성
    - 관계형 모델(relational model)
        - 1969년 에드가 F.코드에 의해 제안
        - 릴레이션(relation)으로 데이터를 표현하는 모델
        - 데이터 표현이 단순하고 직관적 구조화 모델
        - 현재 대다수 DBMS의 기초
        - 관계형 모델을 사용하는 관계형 DBMS(RDBMS)
            - Oracle, DB2, PostgreSQL, MySQL, MSSQL 등

- 릴레이션의 특성
    - 릴레이션 : 테이블
        - 하나의 컬럼과 레코드가 관계를 형성해 데이터를 결정짓는 구조
        - 모든 형태의 데이터들은 '두 개의 메타데이터'에 의해 결정
        - 방대한 메타데이터와 값을 집약적으로 표현, 저장할 수 있는 구조
    - 스키마 : 컬럼들
    - 레코드, 튜플 : 행
    - 컬럼, 속성, 필드 : 열
    - 컬럼 값 : 하나의 값
    - 인스턴스 : 레코드의 집합들
- 릴레이션의 특징
    - 레코드의 유일성
        - 중복된 레코드의 존재가 불가능
    - 레코드의 무순서성
        - 레코드의 순서는 의미가 없음
    - 컬럼의 무순서성
        - 컬럼은 순서가 없고, 이름과 값의 쌍
    - 컬럼값의 원자성
        - 모든 값들은 나눌 수 없는, 단 하나의 의미

- 키의 역할
    - 키(key) : 고유하게 하나의 렠코드를 구분하는 값.
    - 키의 속성
        - 유일성 (uniqueness)
        - 최소성 (Irreducibility)
    - 키의 종류
        - 슈퍼키(super key) : 유일성 만족, 최소성 만족 x
        - 후보키(cadidate key) : 유일성, 최소성 만족
        - 기본키(PK : primary key) : 레코드의 구분을 위해 선택된 후보키
        - 외래키(FK : foregn key) : 참조된 한 릴레이션의 기본키
            - 한 릴레이션 레코드와 다른 릴레이션에 관계된 레코드가 무엇인지 파악 가능
    - 키의 참조
        - 두 릴레이션에 포함된 레코드 간 연관성을 표현

- 관계형 모델의 제약조건
    - 영역 제약 조건 : 컬럼에 정의된 영역(domain)에 속한 값으로만 컬럼값이 결정
    - 키 제약 조건 : 키는 레코드를 고유하게 구별하는 값으로 구성
    - 개체 무결성 제약 조건 : 어떠한 기본키 값도 널(null)이 될 수 없음
        - NULL : 한 번도 입력되지 않은 상태
        - 기본 키 : 꼭 반드시 뭔가가 입력되어야 한다.
    - 참조 무결성 제약 조건 : 반드시 존재하는 레코드의 기본키만 참조 가능
- NULL의 개념
    - 없음 또는 0이 아닌 미지의 값에 대한 표현
        - 입력된 적이 없는 값
        - 적용 불가능한 값

### (2) 논리적 데이터 모델링의 수행

- 논리적 데이터 모델링의 개념
    - DBMS의 구현 모델에 맞춰 데이터를 표현하는 과정
    - 데이터 정의 언어로 기술된 개념 스키마 생성
    - 논리적 데이터 모델링의 역할
        - 관계형 DBMS(RDBMS)의 구현 모델에 맞춰 데이터의 구조와 관계를 표현
        - 도출된 ERD를 RDBMS가 수용 가능한 구조로 변환
- 관계형 모델로 변환 방법
    1. 개체 집합 : 개체 집합은 릴레이션으로 변환
    2. 약한 개체 집합 : 강한 개체 집합의 키 속성을 약한 개체 집합의 릴레이션에 포함
    3. 일대일 관계 : 두 릴레이션 중에서 한 릴레이션의 기본키를 다른 릴레이션에서 외래키로 참조
    4. 일대다 혹은 다대일 관계 : '일'쪽의 기본키를 '다'쪽 릴레이션에서 외래키 참조
    5. 다대다 관계 : 관계 릴레이션을 생성하고, 두 릴레이션의 기본키를 각각 참조하는 외래키를 복합키 형태의 컬럼으로 구성
    6. 다중값 속성 : 릴레이션의 기본키를 참조하는 외래키와 다중값 속성으로 별도의 릴레이션으로 구성
    7. 관계 집합의 속성 : 외래키가 위치한 릴레이션의 컬럼으로 삽입

- ER 다이어그램 변환 규칙
- ER 다이어그램의 변환

### (3) 관계형 데이터 연산

- 관계 연산의 개념
    - 관계형 모델을 기반으로 구성된 릴레이션을 사용하여 새로운 릴레이션을 생성하는 연산자
    - 사용자의 관점에서 필요한 데이터를 다수의 릴레이션에서 추출하는 방법이 필요
    - 관계 대수(relational algebra)
        - 관계 연산을 정의하는 방법
        - 주어진 릴레이션에서 필요한 릴레이션을 만드는 연산자로 구성
            - (∪, ∩, −, σ, π, ×, ⋈, ÷, 집계연산 등)
        - 관계 대수 연산자는 새로운 임시 릴레이션을 생성
        - 연산자를 중첩하여 연산 처리 절차를 표현

- 관계 대수 연산자
    - 셀렉트 연산
        - 주어진 릴레이션에서 조건을 만족하는 레코드를 갖는 릴레이션 생성
        - σ <sub>조건</sub>(R)
    - 프로젝트 연산
        - 기술된 컬럼만 갖는 릴레이션으로 재구성
        - π<sub>컬럼리스트</sub>(R)
- 집합 연산자
    - 릴레이션은 집합, 레코드는 집합에 포함된 원소
    - 집합 이론에서의 이진 연산
        - 합집합 : R ∪ S
        - 교집합 : R ∩ S
        - 차집합 : R - S
    - 집합 연산자 사용 조건
        - 릴레이션 R과 S의 차수가 동일
        - 모든 i에 대해 R의 i번째 컬럼의 도메인과 S의 i번째 컬럼의 도메인이 반드시 동일
- 카티션 프로덕트 연산
    - 두 릴레이션에 포함된 레코드 간의 모든 조합을 생성하는 이항 연산자
    - R x S
- 조인 연산
    - 두 릴레이션에서 조건을 만족하는 레코드만 결합한 레코드로 구성된 릴레이션을 생성
    - R⋈S
- 집계 함수 연산
    - 집계 함수를 값들의 집합 또는 레코드의 집합에 적용하는 연산
        - A : 집계 연산을 적용할 컬럼
        - x() : AVG, SUM, MIN, MAX, COUNT 등의 집계함수
- 그룹화를 이용한 집계 함수
    - 레코드 그룹화를 위해 집계 함수 연산자 앞에 그룹화 속성을 기술
